[server]
listen = "0.0.0.0:8080"
workers = "auto"
max_connections = 1000

[php]
mode = "embed"
enable = true
version = "8.3"
binary_path = "/usr/bin/php"
workers = 4
memory_limit = "512M"
max_execution_time = 300
embed_stack_limit = "512M"

# PHP Error Logging
# Path to PHP error log file (errors are always logged, this controls where)
error_log = "/var/log/veloserve/php_errors.log"
# Display PHP errors in browser output (not recommended for production)
display_errors = false

# Extra ini to reduce recursion/JIT issues in embed
ini_settings = [
    "opcache.enable=0",
    "opcache.enable_cli=0",
    "opcache.jit=0",
    "opcache.jit_buffer_size=0",
    "pcre.jit=0",
    "realpath_cache_size=0",
    "realpath_cache_ttl=0"
]

[cache]
enable = true
storage = "memory"
memory_limit = "256M"
default_ttl = 3600

[[virtualhost]]
domain = "*"
root = "/var/www/wordpress"
platform = "wordpress"
index = ["index.php", "index.html"]

[virtualhost.cache]
enable = false

